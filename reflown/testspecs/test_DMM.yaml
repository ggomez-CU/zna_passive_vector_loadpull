name: test_DMM
requires: [DMM1, DMM2]

plot:
  type: grid
  rows: 1
  cols: 3
  panels:
    - {title: "Both", x: "sample", y: ["Vdc1","Vdc2"], refresh: False}
    - {title: "DMM1", x: "sample", y: "Vdc1", refresh: False}
    - {title: "DMM2", x: "sample", y: "Vdc2", refresh: False}

steps:
  - call: {inst: DMM1, method: preset}
  - call: {inst: DMM1, method: configure_voltage_dc}
  - call: {inst: DMM2, method: preset}
  - call: {inst: DMM2, method: configure_voltage_dc}
  - sweep:
      var: sample
      from: 1
      to:   30
      step: 1
      do:
        - measure: {inst: DMM1, method: measure_voltage, save_as: Vdc1}
        - measure: {inst: DMM2, method: measure_voltage, save_as: Vdc2}
        - results_update: {}

